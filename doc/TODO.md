TODO:

现存问题:

5.问题:处理玩家账号登陆后,挤掉之前的登陆,考虑同网关服,不同网关服登陆情况.

6.问题:战斗模块,不支持提前失效的buff,触发器等.

7.问题:战斗模块,不支持移动时自动躲避障碍.

优化点:

6.增加以Redis作为持久化方式的类CacheService对象,让业务层不需要自主去调用相关读写方法,跟MySQL使用方式类似,隐藏数据持久层细节

7.增加Json文件解析器,且不需要以类名作为Json文件名称

9.新增监控模块,用于后续的性能优化.选型SkyWalking,主要解决分布式链路追踪,应用级别性能监控,低侵入

10.FileBeats收集埋点日志,Logstash日志收集过滤工具,ELK日志分布式搜索工具,Kibana可视化日志Web层展示工具

11.分布式事务

12.多人寻路重叠问题,使用等待+二次寻路解决
具体思路
1.单元状态为寻路中,且含有目的地,使用A*算法得到路径,并把路径存在黑板里
2.寻路ActionAi根据路径行走,若发生碰撞,进入寻路等待状态,并设置时限
3.寻路等待状态中发现目的没有阻挡,回归寻路ActionAi
4.寻路等待状态超出时限,二次寻路(将目标点当作阻挡点)
5.达到目标点一定范围内可算完成寻路,防止多个单位的寻路目标都是同一点

待实现通用业务模块:

2.MMO战斗模块,单人,多人同场景对战--https://zhuanlan.zhihu.com/p/148077453

3.定时器模块

4.账号模块

5.条件判断模块

6.资源,背包模块

7.任务模块

8.排行榜模块---SkipList(ConcurrentSkipListMap)
