TODO:

现存问题:

1.问题:客户端与网关服断开连接后,网关服如何通知游戏服玩家下线?
  解决方法:Session管理,抽象为PlayerSession和ServerSession, 由此需要拆分业务ChildHandler,不能再像现在这样使用同一个Handler.

2.问题:如何使用Protobuf代替Json为序列化框架,减少网络层传输成本?Redis缓存如何使用ProtoBuf
  解决方法:根据各业务定义各自的.proto文件,收到消息后根据请求的命令去反序列化对应的对象.

3.问题:数据库回写使用同一队列,回写压力会过大?
  解决方法:使用多个队列进行回写,每个回写时机不一致,由业务决定每个回写对象使用哪个队列.同时防止同一对象多次入队.

4.问题:现支持多种序列化方式,但在传输到外网客户端时会存在序列化方式不同的情况,也不知道该反序列化成什么类,因此无法处理?
  解决方法:1.所有协议统一到新模块,服务器启动时扫描该模块的所有协议,拿到协议对应的具体的各个参数类型
         2.除转发外,内网传输一律用protostuff,传输到外网客户端时再根据具体协议,客户端序列化方式处理

优化点:

1.合并模块号和命令号为协议号

待实现通用业务模块:

1.MMO战斗模块,单人,多人同场景对战--https://zhuanlan.zhihu.com/p/148077453

2.账号模块

3.资源,背包模块

4.条件判断模块

5.任务模块

6.定时器模块